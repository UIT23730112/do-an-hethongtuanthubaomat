<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Compliance Checker</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/styles.css">

    <!-- JS -->
    <script src="/static/app.js" defer></script>
</head>
<body>

<h2>Personal Data Protection Compliance Checker</h2>

<form method="post" action="/ui/analyze">
   <label><b>Enter URL (optional):</b></label><br>
    <input type="text" name="url" style="width:100%; padding:6px;" placeholder="https://example.com/privacy"><br><br>

    <label><b>Or paste Privacy Policy / Terms:</b></label><br>
    <textarea name="text" style="width:100%; height:200px;">{{ text or "" }}</textarea><br>

    <button type="submit">Analyze</button>
</form>

{% if error %}
<p style="color:red">{{ error }}</p>
{% endif %}

{% if result %}
<hr>

<h3>Compliance Result</h3>
<p><b>Score:</b> {{ result.overall_score }}%</p>
<p><b>Level:</b> {{ result.compliance_level }}</p>

<h4>Summary</h4>
<ul>
    <li>Passed rules: {{ result.summary.passed }}</li>
    <li>Failed rules: {{ result.summary.failed }}</li>
    <li>High risk: {{ result.summary.high_risk_violations }}</li>
</ul>

<h4>Rule Details</h4>
<table>
    <tr>
        <th>Rule ID</th>
        <th>Description</th>
        <th>Passed</th>
        <th>Severity</th>
    </tr>
    {% for r in result.violations %}
    <tr>
        <td>{{ r.rule_id }}</td>
        <td>{{ r.description }}</td>
        <td>{{ "✔" if r.passed else "✖" }}</td>
        <td class="{{ r.severity|lower }}">{{ r.severity }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}

</body>
</html>
